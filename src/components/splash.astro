---
import EmberField from "~/components/ember-field.astro";
import PixelIcon from "~/components/pixel-icon.astro";
import type { Lang } from "~/i18n/translations";
import { translations } from "~/i18n/translations";

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const t = translations[lang];
---

<section class="relative h-full bg-gray-950">
  <EmberField />
  <div id="splash-bg-fallback" class="absolute inset-0 hidden">
    <div class="h-full w-full bg-gradient-to-t from-orange-950/40 via-gray-950 to-gray-950"></div>
  </div>
  <div class="relative grid h-full place-items-center">
    <div class="flex flex-col items-center gap-6 px-8 text-center">
      <div id="bonfire-icon">
        <PixelIcon name="bonfire" size={120} class="md:hidden" />
        <PixelIcon name="bonfire" size={180} class="hidden md:block" />
      </div>
      <h2
        class="gradient-text font-extrabold tracking-tighter text-5xl sm:text-6xl md:text-8xl"
      >
        {t.splash.title}
      </h2>
      <p class="max-w-lg text-gray-400 text-lg md:text-xl">
        {t.splash.subtitle}
        <br />
        {t.splash.tagline}
      </p>
      <div class="mt-4 flex flex-col gap-4 sm:flex-row">
        <a
          href="#download"
          class="inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-orange-500 to-amber-500 px-8 py-3 font-bold text-white transition-transform hover:scale-105"
        >
          {t.splash.downloadBtn}
        </a>
        <a
          href="#features"
          class="inline-flex items-center gap-2 rounded-full border-2 border-orange-500/50 px-8 py-3 font-bold text-orange-400 transition-colors hover:border-orange-400 hover:text-orange-300"
        >
          {t.splash.learnMoreBtn}
        </a>
      </div>
    </div>
  </div>
</section>

<noscript>
  <style>
    #splash-bg-fallback {
      display: block;
    }
  </style>
</noscript>

<style>
  @keyframes flicker {
    0%, 100% {
      transform: scale(1) rotate(0deg);
      filter: brightness(1);
    }
    25% {
      transform: scale(1.05) rotate(-2deg);
      filter: brightness(1.1);
    }
    50% {
      transform: scale(0.98) rotate(1deg);
      filter: brightness(0.95);
    }
    75% {
      transform: scale(1.03) rotate(-1deg);
      filter: brightness(1.05);
    }
  }

  #bonfire-icon {
    animation: flicker 3s ease-in-out infinite;
    filter: drop-shadow(0 0 30px rgba(251, 146, 60, 0.6));
  }

  @media (prefers-reduced-motion: reduce) {
    #bonfire-icon {
      @apply animate-none;
    }

    :global(#ember-field) {
      @apply hidden;
    }

    #splash-bg-fallback {
      @apply block;
    }
  }
</style>
